import subprocess
import io
import random


def test(cmds, ans):
    inData = "{cmds}\n".format(n=len(cmds), cmds='\n'.join(cmds))
    result = subprocess.run("E.exe", input=inData.encode(), stdout=subprocess.PIPE)
    return result.returncode == 0 and list(result.stdout.decode().splitlines()) == ans


def genTest(minN=1, maxN=10, maxA=50):
    n = random.randrange(minN, maxN)
    cmds = []
    ans = []
    values = {}
    cmds.append("{}".format(n))
    for _ in range(n):
        cmd = random.randrange(0, 2)
        if cmd == 0:
            curVal = random.randrange(0, maxA)
            cmds.append("+ {}".format(curVal))
            values[curVal] = values.get(curVal, 0) + 1
        elif cmd == 1:
            curVal = random.randrange(0, maxA)
            cmds.append("? {}".format(curVal))
            
            result = 0
            for key in values:
                if key <= curVal:
                    result += key * values[key]
            
            ans.append(str(result))
        
    return ans, cmds


def stress(count):
    for i in range(count):
        ans, cmds = genTest(maxN=30, maxA=70)
        
        if not test(cmds, ans):
            print("[Error]", cmds, ans)
            #break


stress(100)


"""

[Error] ['27', '+ 32', '? 49', '? 56', '? 0', '+ 66', '+ 62', '+ 54', '+ 53', '? 68', '? 4', '+ 23', '+ 26', '+ 24', '+ 16', '+ 48', '+ 52', '+ 18', '+ 43', '? 38', '? 9', '? 0', '+ 35', '+ 23', '+ 41', '+ 27', '? 41', '+ 53'] ['32', '32', '0', '267', '0', '139', '0', '0', '265']
[Error] ['27', '? 54', '+ 28', '+ 13', '? 24', '+ 45', '+ 46', '? 2', '? 9', '? 23', '+ 42', '? 68', '? 34', '? 18', '+ 47', '? 59', '? 50', '? 54', '+ 44', '+ 8', '+ 13', '+ 69', '? 55', '? 7', '+ 56', '+ 23', '+ 64', '+ 62'] ['0', '13', '0', '0', '13', '174', '41', '13', '221', '221', '221', '286', '0']
[Error] ['28', '+ 9', '+ 30', '+ 60', '+ 52', '? 53', '+ 50', '? 13', '? 22', '? 35', '+ 17', '+ 52', '+ 63', '? 22', '? 28', '? 61', '? 56', '+ 36', '+ 25', '+ 28', '+ 9', '? 39', '+ 45', '? 57', '+ 17', '? 49', '+ 38', '+ 23', '+ 21'] ['91', '9', '9', '39', '26', '26', '270', '210', '154', '353', '216']
[Error] ['26', '? 63', '? 3', '? 15', '+ 29', '+ 0', '+ 25', '? 21', '? 56', '? 61', '+ 15', '+ 49', '? 27', '+ 57', '? 43', '? 59', '+ 4', '+ 17', '+ 16', '+ 16', '? 36', '+ 17', '+ 16', '? 8', '? 21', '? 14', '? 1'] ['0', '0', '0', '0', '54', '54', '40', '69', '175', '122', '4', '101', '4', '0']
[Error] ['19', '? 36', '? 8', '? 30', '+ 8', '+ 58', '? 19', '+ 4', '+ 28', '? 23', '+ 37', '? 63', '+ 25', '+ 20', '? 47', '+ 25', '+ 66', '? 48', '? 12', '+ 7'] ['0', '0', '0', '8', '12', '135', '122', '147', '12']
[Error] ['25', '? 23', '? 9', '+ 51', '+ 28', '? 60', '+ 24', '? 13', '? 10', '? 62', '+ 0', '+ 14', '+ 45', '+ 59', '? 56', '+ 49', '+ 22', '? 56', '+ 5', '+ 62', '+ 5', '+ 57', '? 15', '? 0', '? 5', '? 55'] ['0', '0', '79', '0', '0', '103', '162', '233', '24', '0', '10', '243']
[Error] ['20', '+ 20', '? 35', '+ 19', '? 66', '+ 5', '? 69', '+ 27', '+ 60', '? 60', '+ 18', '? 30', '+ 13', '+ 61', '+ 12', '? 13', '? 60', '+ 12', '? 19', '+ 23', '? 16'] ['20', '39', '44', '131', '89', '30', '174', '79', '42']
[Error] ['26', '? 6', '? 46', '+ 29', '? 21', '? 9', '+ 7', '+ 62', '+ 42', '? 60', '+ 0', '+ 25', '+ 31', '+ 29', '? 45', '+ 6', '? 21', '? 45', '? 10', '+ 48', '? 51', '+ 26', '+ 37', '+ 26', '? 44', '+ 2', '? 60'] ['0', '0', '0', '0', '78', '163', '13', '169', '13', '217', '258', '308']


[Error] ['19', '? 36', '? 8', '? 30', '+ 8', '+ 58', '? 19', '+ 4', '+ 28', '? 23', '+ 37', '? 63', '+ 25', '+ 20', '? 47', '+ 25', '+ 66', '? 48', '? 12', '+ 7'] ['0', '0', '0', '8', '12', '135', '122', '147', '12']

13
+ 8
+ 58
+ 4
+ 28
+ 37
+ 25
+ 20
? 47
+ 25
+ 66
? 48
? 12
+ 7

['122', '147', '12']



"""
